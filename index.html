<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ponrkit</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap');
    
    *, *::before, *::after { 
      box-sizing: border-box; 
    }
    
    body, html {
      margin: 0; 
      padding: 0; 
      min-height: 100vh;
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #ffffff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow-x: hidden;
    }

    /* Animated background particles */
    .bg-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      animation: float 20s infinite linear;
    }

    @keyframes float {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }
    
    .container {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(25px);
      border-radius: 32px;
      padding: 40px 24px;
      max-width: 800px;
      width: 95vw;
      box-shadow: 0 20px 60px rgba(0,0,0,0.2),
                  inset 0 0 0 1px rgba(255,255,255,0.2);
      text-align: center;
      user-select: none;
      margin: 20px 10px;
      position: relative;
      overflow: hidden;
      transform: translateY(0);
      animation: slideUp 0.8s ease-out;
    }

    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, #fff, transparent);
      animation: shimmer 3s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    
    h1 {
      font-weight: 700;
      font-size: 2.4rem;
      margin-bottom: 32px;
      background: linear-gradient(135deg, #fff, #e0e7ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.02em;
      line-height: 1.2;
    }
    
    .btn-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 32px;
    }
    
    .btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 16px 12px;
      border-radius: 16px;
      font-weight: 600;
      font-size: 0.85rem;
      cursor: pointer;
      text-decoration: none;
      color: #fff;
      border: none;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      text-align: center;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      min-height: 56px;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }
    
    .btn:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 15px 30px rgba(0,0,0,0.25);
    }

    .btn:active {
      transform: translateY(-2px) scale(1.01);
    }
    
    .btn-instagram { 
      background: linear-gradient(135deg, #f58529, #dd2a7b, #8134af, #515bd4);
    }
    .btn-facebook { 
      background: linear-gradient(135deg, #1877f2, #42a5f5);
    }
    .btn-linkedin { 
      background: linear-gradient(135deg, #0077b5, #00a0dc);
    }
    .btn-github { 
      background: linear-gradient(135deg, #333333, #24292e);
    }
    .btn-resume { 
      background: linear-gradient(135deg, #28a745, #20c997);
    }
    .btn-phone { 
      background: linear-gradient(135deg, #17a2b8, #20c997);
    }
    .btn-email { 
      background: linear-gradient(135deg, #ff9900, #ff6b35);
    }
    .btn-more { 
      background: linear-gradient(135deg, #ff6f61, #ff8a65);
    }
    .btn-work-experience { 
      background: linear-gradient(135deg, #1e90ff, #1c7ed6);
    }

    .btn i {
      font-size: 1.1em;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
      flex-shrink: 0;
    }

    .btn-instagram i { color: #fff; }
    .btn-facebook i { color: #fff; }
    .btn-linkedin i { color: #fff; }
    .btn-github i { color: #fff; }
    .btn-resume i { color: #fff; }
    .btn-phone i { color: #fff; }
    .btn-email i { color: #fff; }
    .btn-more i { color: #fff; }
    .btn-work-experience i { color: #fff; }

    #datetime {
      margin-top: 32px;
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 400;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      backdrop-filter: blur(10px);
      display: inline-block;
    }

    footer {
      margin-top: 24px;
      padding: 16px;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.7);
      text-align: center;
      width: 100%;
      font-weight: 400;
    }

    .modal {
      position: fixed;
      top: 0; 
      left: 0;
      width: 100vw; 
      height: 100vh;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(10px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      padding: 16px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .modal.active { 
      display: flex; 
      opacity: 1;
    }
    
    .modal-content {
      background: linear-gradient(135deg, #1f2937, #374151);
      color: #fff;
      border-radius: 20px;
      padding: 24px;
      max-width: 900px;
      width: 100%;
      text-align: center;
      overflow-y: auto;
      max-height: 90vh;
      box-shadow: 0 25px 80px rgba(0,0,0,0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      transform: scale(0.8);
      transition: transform 0.3s ease;
    }

    .modal.active .modal-content {
      transform: scale(1);
    }

    .modal-content h2 {
      font-size: 1.8rem;
      margin-bottom: 24px;
      background: linear-gradient(135deg, #fff, #e0e7ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
    }

    .project-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin: 24px 0;
    }

    .project-btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      font-size: 0.85rem;
      line-height: 1.4;
      text-align: left;
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
    }

    .project-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    }

    .project-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.5s;
    }

    .project-btn:hover::before {
      left: 100%;
    }

    #pdfPreview {
      margin-top: 24px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      background: #000;
    }

    #pdfFrame {
      border: none;
      border-radius: 12px;
      width: 100%;
      height: 400px;
    }
    
    .modal-close {
      background: linear-gradient(135deg, #ff6f61, #ff8a65);
      color: #fff;
      font-weight: 600;
      padding: 12px 24px;
      border: none;
      border-radius: 20px;
      margin-top: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .modal-close:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 111, 97, 0.3);
    }

    .audio-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.15);
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      font-size: 16px;
      backdrop-filter: blur(15px);
      transition: all 0.3s ease;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .audio-toggle:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: scale(1.05);
    }

    /* Desktop styles */
    @media (min-width: 769px) {
      .container {
        padding: 48px 32px;
        width: 90vw;
      }
      
      h1 {
        font-size: 2.8rem;
        margin-bottom: 48px;
      }
      
      .btn-grid {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
      }
      
      .btn {
        padding: 18px 24px;
        font-size: 0.95rem;
        gap: 12px;
      }
      
      .btn:hover {
        transform: translateY(-8px) scale(1.05);
        box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      }
      
      #datetime {
        font-size: 0.9rem;
        padding: 12px 20px;
      }
      
      footer {
        margin-top: 32px;
        padding: 20px;
        font-size: 14px;
      }
      
      .modal-content {
        padding: 40px;
      }
      
      .modal-content h2 {
        font-size: 2.2rem;
        margin-bottom: 32px;
      }
      
      .project-grid {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 16px;
        margin: 32px 0;
      }
      
      .project-btn {
        padding: 20px;
        font-size: 0.9rem;
      }
      
      #pdfFrame {
        height: 500px;
      }
      
      .modal-close {
        padding: 14px 32px;
        margin-top: 32px;
        font-size: 1rem;
      }
      
      .audio-toggle {
        bottom: 30px;
        right: 30px;
        width: 56px;
        height: 56px;
        font-size: 20px;
      }

      .btn-update-log {
        display: flex;
      }
    }

    /* Small mobile adjustments */
    @media (max-width: 480px) {
      h1 { 
        font-size: 2rem; 
        margin-bottom: 24px;
      }
      
      .container { 
        padding: 32px 16px; 
        margin: 15px 8px;
      }
      
      .btn {
        font-size: 0.75rem;
        padding: 12px 8px;
        min-height: 50px;
      }
      
      .btn i {
        font-size: 1em;
      }
      
      #datetime {
        font-size: 0.8rem;
        padding: 10px 14px;
      }
      
      footer {
        font-size: 11px;
        padding: 12px;
      }
      
      .audio-toggle {
        bottom: 15px;
        right: 15px;
        width: 44px;
        height: 44px;
        font-size: 14px;
      }

      .btn-update-log {
        display: none;
      }
    }

    /* Very small screens */
    @media (max-width: 360px) {
      .container {
        width: 98vw;
        margin: 10px 4px;
        padding: 24px 12px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .btn {
        font-size: 0.75rem;
        padding: 12px 8px;
        min-height: 50px;
      }
      
    }

    /* Update Log Button */
    .btn-update-log {
      position: fixed;
      bottom: 30px;
      left: 30px;
      background: linear-gradient(135deg, #28a745, #20c997);
      color: white;
      border: none;
      border-radius: 20px;
      padding: 12px 24px;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      display: none; /* Hidden by default, shown in desktop media query */
      align-items: center;
      gap: 8px;
      z-index: 1000;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }

    .btn-update-log:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 12px 30px rgba(0,0,0,0.3);
    }

    .btn-update-log i {
      font-size: 1.1em;
    }

    /* Update list styling */
    .update-list {
      list-style: none;
      padding: 0;
      margin: 24px 0;
      text-align: left;
    }

    .update-list li {
      background: rgba(255, 255, 255, 0.05);
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 8px;
      border-left: 3px solid #667eea;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .update-list li strong {
      color: #a3b3ff;
    }
  </style>
</head>
<body oncontextmenu="return false" onkeydown="return disableKey(event)" onselectstart="return false">
  <!-- Animated background particles -->
  <div class="bg-particles" id="particles"></div>

  <div class="container">
    <h1>Ponrakit Leartrungvichian</h1>
    <div class="btn-grid">
      <a href="https://www.instagram.com/o_ak.k.k.k.k.k.k.k.k.k.k.k.k.k/" target="_blank" class="btn btn-instagram">
        <i class="fab fa-instagram"></i> Instagram
      </a>
      <a href="https://www.facebook.com/Ponrakitts" target="_blank" class="btn btn-facebook">
        <i class="fab fa-facebook-f"></i> Facebook
      </a>
      <a href="https://www.linkedin.com/in/ponrakitt-leartrungvichian-470712207/" target="_blank" class="btn btn-linkedin">
        <i class="fab fa-linkedin-in"></i> LinkedIn
      </a>
      <a href="https://github.com/ponrakitt" target="_blank" class="btn btn-github">
        <i class="fab fa-github"></i> GitHub
      </a>
      <a href="Ponrakit_resume.pdf" download class="btn btn-resume">
        <i class="fas fa-file-alt"></i> Resume
      </a>
      <a href="tel:0615144432" class="btn btn-phone">
        <i class="fas fa-phone-alt"></i> โทร
      </a>
      <a href="mailto:ponrakitt@outlook.co.th" class="btn btn-email">
        <i class="fas fa-envelope"></i> Email
      </a>
      <button class="btn btn-more" id="btnMore">
        <i class="fas fa-folder-open"></i> My Projects
      </button>
      <button class="btn btn-work-experience" id="btnWorkExperience">
        <i class="fas fa-briefcase"></i> Work Experience
      </button>
      <a href="Tracking.html" target="_blank" class="btn btn-manage-apps">
        <i class="fas fa-tasks"></i> Manage Applications
      </a>
    </div>
    <div id="datetime"></div>
  </div>

  <footer>
    © 2025 Ponrakit. All rights reserved. | Last update 09-06-2025 9:25:54
  </footer>

  <!-- Update Log Button -->
  <button class="btn-update-log" id="updateLogBtn">
    <i class="fas fa-history"></i> Update Log
  </button>

  <!-- Maintenance Modal -->
  <div class="modal" id="maintenanceModal">
    <div class="modal-content">
      <h2><i class="fas fa-tools"></i> ปิดปรับปรุงระบบชั่วคราว</h2>
      <p style="font-size: 1.1rem; margin: 24px 0;">ขออภัยในความไม่สะดวก ขณะนี้เว็บไซต์อยู่ในช่วงปิดปรับปรุงประจำสัปดาห์ (ทุกวันอาทิตย์ เวลา 01:00 - 04:00 น.) ขออภัยในความไม่สะดวก</p>
      <p>โปรดกลับมาอีกครั้งใน:</p>
      <div id="countdown" style="font-size: 2rem; font-weight: bold; margin: 16px 0; color: #ffc107;"></div>
      <div id="maintenance-actions" style="margin-top: 24px; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 24px; display: none;">
        <p style="font-size: 0.9rem; margin-bottom: 16px;">คุณยังคงสามารถดำเนินการบางอย่างได้:</p>
        <div id="cloned-buttons-container" style="display: flex; justify-content: center; align-items: center; gap: 16px; flex-wrap: wrap;">
          <!-- Cloned buttons will be injected here by JS -->
        </div>
      </div>
    </div>
  </div>

  <!-- Coming Soon Modal -->
  <div class="modal" id="comingSoonModal">
    <div class="modal-content">
      <h2><i class="fas fa-hourglass-half"></i> Coming Soon</h2>
      <p style="font-size: 1.2rem; margin: 24px 0;">This section is under construction.</p>
      <button class="modal-close" id="closeComingSoonModal">
        <i class="fas fa-times"></i> ปิด
      </button>
    </div>
  </div>

  <!-- Enhanced Modal -->
  <div class="modal" id="modalPopup">
    <div class="modal-content">
      <h2><i class="fas fa-rocket"></i> My Projects</h2>
      <div class="project-grid">
        <button class="project-btn" onclick="previewPDF('เล่มโปรเจคจบการเตรียมแผ่นนำแสงโดยกระบวน_r 2025-05-22.pdf')">
          <i class="fas fa-lightbulb"></i>
          <strong>Light Guide Plate Fabrication</strong><br>
          <small>Laser Marking & Nanoparticle Coating Processes</small>
        </button>
        <button class="project-btn" onclick="previewPDF('project2-ai-blockchain-integration-2025-long-title-sample.pdf')">
          <i class="fas fa-flask"></i>
          <strong>Chemical Detection System</strong><br>
          <small>Nitrite & Nitrate Detection using Griess Reagent and Gold Nanoparticles</small>
        </button>
        <button class="project-btn" onclick="previewPDF('project3-sustainable-energy-smart-grid-research-document.pdf')">
          <i class="fas fa-atom"></i>
          <strong>Graphene Synthesis</strong><br>
          <small>Laser Ablation Method for Supercapacitor Electrodes</small>
        </button>
        <button class="project-btn" onclick="previewPDF('project5-innovative-materials-for-sustainable-future.pdf')">
          <i class="fas fa-microchip"></i>
          <strong>Microfluidic Device</strong><br>
          <small>First PDMS Device for Chemical Mixing Applications</small>
        </button>
        <button class="project-btn" onclick="previewPDF('project6-advanced-materials-for-sustainable-energy.pdf')">
          <i class="fas fa-cube"></i>
          <strong>DFT Structural Optimization</strong><br>
          <small>Potassium Chloride Analysis via CASTEP</small>
        </button>
      </div>
      
      <div id="pdfPreview" style="display: none;">
        <iframe id="pdfFrame" src=""></iframe>
      </div>
      
      <button class="modal-close" id="closeModal">
        <i class="fas fa-times"></i> ปิด
      </button>
    </div>
  </div>

  <!-- Update Log Modal -->
  <div class="modal" id="updateLogModal">
    <div class="modal-content">
      <h2><i class="fas fa-history"></i> ประวัติการอัปเดต</h2>
      <ul class="update-list">
        <li><strong>26 ก.ค. 2567:</strong> เพิ่มปุ่มและป๊อปอัปสำหรับแสดงประวัติการอัปเดต (Update Log)</li>
        <li><strong>25 ก.ค. 2567:</strong>ปรับขนาดปุ่มทั้งหมดให้เท่ากันเพื่อความสวยงาม</li>
        <li><strong>24 ก.ค. 2567:</strong> เพิ่มเพลงพื้นหลังพร้อมปุ่มเปิด/ปิดเสียง</li>
        <li><strong>23 ก.ค. 2567:</strong> เปิดตัวเวอร์ชันแรกของหน้าเว็บ</li>
      </ul>
      <button class="modal-close" id="closeUpdateLogModal">
        <i class="fas fa-times"></i> ปิด
      </button>
    </div>
  </div>

  <!-- Audio Player & Toggle -->
  <audio id="lofiAudio" autoplay loop></audio>
  <button class="audio-toggle" id="toggleAudio">
    <i id="audioIcon" class="fas fa-volume-up"></i>
  </button>

  <script>
    let isMaintenanceActive = false;

    // Maintenance Mode Functionality
    function checkMaintenance() {
      // --- ตั้งค่าเวลาปิดปรับปรุงที่นี่ ---
      const maintenanceDay = 2;        // วันที่ต้องการปิดปรับปรุง (0=อาทิตย์, 1=จันทร์, ..., 6=เสาร์)
      const maintenanceStartHour =1;  // เวลาเริ่มต้น (ตี 1)
      const maintenanceEndHour = 24;    // เวลาสิ้นสุด (ตี 4)
      // ----------------------------------------------------

      const now = new Date();
      const currentDay = now.getDay();
      const currentHour = now.getHours();
      let inMaintenance = false;

      // ตรวจสอบว่าเป็นวันอาทิตย์ และอยู่ในช่วงเวลา ตี 1 - ตี 4 หรือไม่
      if (currentDay === maintenanceDay && (currentHour >= maintenanceStartHour && currentHour < maintenanceEndHour)) {
        inMaintenance = true;
      }
      
      if (inMaintenance) {
        isMaintenanceActive = true;
        const modal = document.getElementById('maintenanceModal');
        modal.classList.add('active');
        
        const countdownElement = document.getElementById('countdown');
        const maintenanceEndTime = new Date();
        maintenanceEndTime.setHours(maintenanceEndHour, 0, 0, 0);

        function updateCountdown() {
            const currentTime = new Date();
            const timeLeft = maintenanceEndTime - currentTime;

            if (timeLeft <= 0) {
              clearInterval(countdownInterval);
              window.location.reload();
              return;
            }
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            countdownElement.innerHTML = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }
        
        const countdownInterval = setInterval(updateCountdown, 1000);
        updateCountdown();

        // --- Clone buttons to be available during maintenance ---
        const resumeLink = document.querySelector('a.btn-resume');
        const audioToggle = document.getElementById('toggleAudio');
        const actionsContainer = document.getElementById('maintenance-actions');
        const buttonsContainer = document.getElementById('cloned-buttons-container');

        if (resumeLink && audioToggle && buttonsContainer && actionsContainer) {
          actionsContainer.style.display = 'block';

          // 1. Clone Resume Button
          const resumeClone = resumeLink.cloneNode(true);
          buttonsContainer.appendChild(resumeClone);

          // 2. Clone Audio Toggle Button
          const audioToggleClone = audioToggle.cloneNode(true);
          audioToggleClone.id = 'audioToggleClone'; // Prevent duplicate ID
          
          audioToggleClone.addEventListener('click', () => {
            audioToggle.click(); // Relay click to original button
          });
          buttonsContainer.appendChild(audioToggleClone);

          // 3. Sync icon state from original to clone
          const originalIcon = document.getElementById('audioIcon');
          const clonedIcon = audioToggleClone.querySelector('i');
          if(originalIcon && clonedIcon) {
            const observer = new MutationObserver(() => {
              clonedIcon.className = originalIcon.className;
            });
            observer.observe(originalIcon, { attributes: true, attributeFilter: ['class'] });
          }
        }
      }
    }
    checkMaintenance();

    // Create animated particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = window.innerWidth < 768 ? 30 : 50;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.width = Math.random() * 4 + 2 + 'px';
        particle.style.height = particle.style.width;
        particle.style.animationDelay = Math.random() * 20 + 's';
        particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
        particlesContainer.appendChild(particle);
      }
    }
    createParticles();

    // Modal functionality
    const btnMore = document.getElementById('btnMore');
    const modal = document.getElementById('modalPopup');
    const closeModal = document.getElementById('closeModal');
    const pdfPreview = document.getElementById('pdfPreview');

    btnMore.onclick = () => modal.classList.add('active');
    closeModal.onclick = () => {
      modal.classList.remove('active');
      pdfPreview.style.display = 'none';
    };
    modal.onclick = (e) => { 
      if (e.target === modal) {
        modal.classList.remove('active');
        pdfPreview.style.display = 'none';
      }
    };
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        modal.classList.remove('active');
        pdfPreview.style.display = 'none';
      }
    });

    function previewPDF(pdfUrl) {
      document.getElementById('pdfFrame').src = pdfUrl;
      pdfPreview.style.display = 'block';
    }

    function disableKey(e) {
      if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
        e.preventDefault();
        return false;
      }
    }

    // DateTime update
    function updateDateTime() {
      const now = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const time = now.toLocaleTimeString('th-TH');
      const date = now.toLocaleDateString('th-TH', options);
      document.getElementById('datetime').innerText = `${date} ${time}`;
    }
    updateDateTime();
    setInterval(updateDateTime, 1000);

    // Audio functionality
    const audio = document.getElementById('lofiAudio');
    const toggleBtn = document.getElementById('toggleAudio');
    const audioIcon = document.getElementById('audioIcon');
    const playlist = [
      'forest-guitar-lofi-161108.mp3',
      'summer-rain-lofi-vibes-216043.mp3',
      'summer-sunset-lofi-slow-mix-154447.mp3',
      'good-night-lofi-cozy-chill-music-160166.mp3',
    ];
    let currentSong = Math.floor(Math.random() * playlist.length);
    
    function loadSong(index) {
      audio.src = playlist[index];
      audio.play().catch(e => console.log('Audio autoplay prevented'));
    }
    loadSong(currentSong);

    toggleBtn.addEventListener('click', () => {
      if (audio.paused) {
        audio.play();
        audioIcon.classList.replace('fa-volume-mute', 'fa-volume-up');
      } else {
        audio.pause();
        audioIcon.classList.replace('fa-volume-up', 'fa-volume-mute');
      }
    });

    // Prevent right-click
    document.addEventListener('contextmenu', function (e) {
      e.preventDefault();
    });

    // Prevent right-click on PDF iframe
    const iframe = document.getElementById('pdfFrame');
    iframe.addEventListener('load', () => {
      const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
      if (iframeDoc) {
        iframeDoc.addEventListener('contextmenu', function (e) {
          e.preventDefault();
        });
      }
    });

    // Handle window resize for particles
    window.addEventListener('resize', () => {
      const particlesContainer = document.getElementById('particles');
      particlesContainer.innerHTML = '';
      createParticles();
    });

    // Update Log Modal functionality
    const updateLogBtnTrack = document.getElementById('updateLogBtn');
    const updateLogModal = document.getElementById('updateLogModal');
    const closeUpdateLogModal = document.getElementById('closeUpdateLogModal');

    // Coming Soon Modal functionality
    const btnWorkExperienceTrack = document.getElementById('btnWorkExperience');
    const comingSoonModal = document.getElementById('comingSoonModal');
    const closeComingSoonModal = document.getElementById('closeComingSoonModal');

    if (updateLogBtnTrack) {
      updateLogBtnTrack.onclick = () => updateLogModal.classList.add('active');
      // Track Update Log button
      updateLogBtnTrack.addEventListener('click', function() {
        trackButtonClick('Update Log');
      });
    }
    if (btnWorkExperienceTrack) {
      btnWorkExperienceTrack.onclick = () => comingSoonModal.classList.add('active');
      // Track Work Experience button
      btnWorkExperienceTrack.addEventListener('click', function() {
        trackButtonClick('Work Experience');
      });
    }
    if (closeUpdateLogModal) {
      closeUpdateLogModal.onclick = () => updateLogModal.classList.remove('active');
    }
    if (closeComingSoonModal) {
      closeComingSoonModal.onclick = () => comingSoonModal.classList.remove('active');
    }
    if (updateLogModal) {
      updateLogModal.onclick = (e) => {
        if (e.target === updateLogModal) {
          updateLogModal.classList.remove('active');
        }
      };
    }
    if (comingSoonModal) {
      comingSoonModal.onclick = (e) => {
        if (e.target === comingSoonModal) {
          comingSoonModal.classList.remove('active');
        }
      };
    }

    document.addEventListener('keydown', e => {
      if (isMaintenanceActive) { return; } // Block escape key during maintenance

      if (e.key === 'Escape') {
        // Close project modal
        modal.classList.remove('active');
        pdfPreview.style.display = 'none';
        // Close update log modal
        if (updateLogModal) {
          updateLogModal.classList.remove('active');
        }
        // Close coming soon modal
        if (comingSoonModal) {
          comingSoonModal.classList.remove('active');
        }
      }
    });

    function previewPDF(pdfUrl) {
      document.getElementById('pdfFrame').src = pdfUrl;
      pdfPreview.style.display = 'block';
    }

    // === Tracking Button Clicks ===
    function trackButtonClick(buttonName) {
      fetch('https://your-app.onrender.com/track-click', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ button: buttonName, time: new Date().toISOString() })
      }).catch(e => console.log('Track error:', e));
    }

    // Track .btn-grid buttons
    document.querySelectorAll('.btn-grid .btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const label = btn.innerText.trim().replace(/\s+/g, ' ');
        trackButtonClick(label);
      });
    });

    // Track project modal buttons
    document.querySelectorAll('.project-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const label = btn.innerText.trim().replace(/\s+/g, ' ');
        trackButtonClick('Project: ' + label);
      });
    });
  </script>
</body>
</html>
