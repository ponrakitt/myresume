<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ponrkit</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap');
    
    *, *::before, *::after { 
      box-sizing: border-box; 
    }
    
    body, html {
      margin: 0; 
      padding: 0; 
      min-height: 100vh;
      min-height: 100dvh; /* Dynamic viewport height for mobile */
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      color: #ffffff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow-x: hidden;
      position: relative;
      /* Safe area support for iPhone */
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
      z-index: -2;
    }

    /* Animated background particles */
    .bg-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      animation: float 20s infinite linear;
    }

    @keyframes float {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }
    
    .container {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(35px);
      border-radius: 40px;
      padding: 48px 32px;
      max-width: 900px;
      width: 95vw;
      box-shadow: 
        0 25px 80px rgba(0,0,0,0.4),
        0 0 0 1px rgba(255,255,255,0.1),
        inset 0 1px 0 rgba(255,255,255,0.2);
      text-align: center;
      user-select: none;
      margin: 20px 10px;
      position: relative;
      overflow: hidden;
      transform: translateY(0);
      animation: slideUp 0.8s ease-out;
      border: 1px solid rgba(255, 255, 255, 0.15);
    }

    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent, #ff6b9d, #4ecdc4, #45b7d1, transparent);
      animation: shimmer 4s infinite;
      border-radius: 40px 40px 0 0;
    }

    .container::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(255,255,255,0.05) 100%);
      border-radius: 40px;
      pointer-events: none;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    
    h1 {
      font-weight: 800;
      font-size: 2.8rem;
      margin-bottom: 40px;
      background: linear-gradient(135deg, #fff 0%, #e0e7ff 25%, #ff6b9d 50%, #4ecdc4 75%, #45b7d1 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.03em;
      line-height: 1.1;
      text-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
      position: relative;
    }

    h1::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 3px;
      background: linear-gradient(90deg, #ff6b9d, #4ecdc4, #45b7d1);
      border-radius: 2px;
    }
    
    .btn-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 32px;
    }
    
    .btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 18px 16px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      text-decoration: none;
      color: #fff;
      border: none;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      text-align: center;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      min-height: 60px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.6s;
    }

    .btn:hover::before {
      left: 100%;
    }
    
    .btn:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .btn:active {
      transform: translateY(-2px) scale(1.01);
    }
    
    .btn-instagram { 
      background: linear-gradient(135deg, #f58529, #dd2a7b, #8134af, #515bd4);
      box-shadow: 0 8px 25px rgba(221, 42, 123, 0.3);
    }
    .btn-facebook { 
      background: linear-gradient(135deg, #1877f2, #42a5f5);
      box-shadow: 0 8px 25px rgba(24, 119, 242, 0.3);
    }
    .btn-linkedin { 
      background: linear-gradient(135deg, #0077b5, #00a0dc);
      box-shadow: 0 8px 25px rgba(0, 119, 181, 0.3);
    }
    .btn-github { 
      background: linear-gradient(135deg, #333333, #24292e);
      box-shadow: 0 8px 25px rgba(51, 51, 51, 0.3);
    }
    .btn-resume { 
      background: linear-gradient(135deg, #28a745, #20c997);
      box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
    }
    .btn-phone { 
      background: linear-gradient(135deg, #17a2b8, #20c997);
      box-shadow: 0 8px 25px rgba(23, 162, 184, 0.3);
    }
    .btn-email { 
      background: linear-gradient(135deg, #ff9900, #ff6b35);
      box-shadow: 0 8px 25px rgba(255, 153, 0, 0.3);
    }
    .btn-more { 
      background: linear-gradient(135deg, #ff6f61, #ff8a65);
      box-shadow: 0 8px 25px rgba(255, 111, 97, 0.3);
    }
    .btn-work-experience { 
      background: linear-gradient(135deg, #1e90ff, #1c7ed6);
      box-shadow: 0 8px 25px rgba(30, 144, 255, 0.3);
    }
    .btn-website { 
      background: linear-gradient(135deg, #ff6b6b, #ee5a24);
      box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
    }

    .btn i {
      font-size: 1.1em;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
      flex-shrink: 0;
    }

    .btn-instagram i { color: #fff; }
    .btn-facebook i { color: #fff; }
    .btn-linkedin i { color: #fff; }
    .btn-github i { color: #fff; }
    .btn-resume i { color: #fff; }
    .btn-phone i { color: #fff; }
    .btn-email i { color: #fff; }
    .btn-more i { color: #fff; }
    .btn-work-experience i { color: #fff; }
    .btn-website i { color: #fff; }

    #datetime {
      margin-top: 40px;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 500;
      padding: 16px 24px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      backdrop-filter: blur(15px);
      display: inline-block;
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }

    #datetime::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.8s;
    }

    #datetime:hover::before {
      left: 100%;
    }

    footer {
      margin-top: 32px;
      padding: 20px;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.8);
      text-align: center;
      width: 100%;
      font-weight: 500;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .modal {
      position: fixed;
      top: 0; 
      left: 0;
      width: 100vw; 
      height: 100vh;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(10px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      padding: 16px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .modal.active { 
      display: flex; 
      opacity: 1;
    }
    
    .modal-content {
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      color: #fff;
      border-radius: 30px;
      padding: 32px;
      max-width: 1000px;
      width: 100%;
      text-align: center;
      overflow-y: auto;
      max-height: 90vh;
      box-shadow: 
        0 30px 100px rgba(0,0,0,0.6),
        0 0 0 1px rgba(255,255,255,0.1),
        inset 0 1px 0 rgba(255,255,255,0.2);
      border: 1px solid rgba(255, 255, 255, 0.15);
      position: relative;
      transform: scale(0.8);
      transition: transform 0.3s ease;
      backdrop-filter: blur(20px);
    }

    .modal.active .modal-content {
      transform: scale(1);
    }

    .modal-content h2 {
      font-size: 2rem;
      margin-bottom: 32px;
      background: linear-gradient(135deg, #fff 0%, #e0e7ff 25%, #ff6b9d 50%, #4ecdc4 75%, #45b7d1 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 800;
      text-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
    }

    .project-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin: 24px 0;
    }

    .project-btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 16px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.4s ease;
      font-weight: 600;
      font-size: 0.9rem;
      line-height: 1.4;
      text-align: left;
      border: 1px solid rgba(255, 255, 255, 0.15);
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      backdrop-filter: blur(10px);
    }

    .project-btn:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .project-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.5s;
    }

    .project-btn:hover::before {
      left: 100%;
    }

    #pdfPreview {
      margin-top: 24px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      background: #000;
    }

    #pdfFrame {
      border: none;
      border-radius: 12px;
      width: 100%;
      height: 400px;
    }
    
    .modal-close {
      background: linear-gradient(135deg, #ff6f61, #ff8a65);
      color: #fff;
      font-weight: 600;
      padding: 12px 24px;
      border: none;
      border-radius: 20px;
      margin-top: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .modal-close:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 111, 97, 0.3);
    }

    .audio-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      bottom: max(20px, env(safe-area-inset-bottom) + 10px);
      right: max(20px, env(safe-area-inset-right) + 10px);
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      font-size: 18px;
      backdrop-filter: blur(20px);
      transition: all 0.4s ease;
      box-shadow: 0 12px 35px rgba(0,0,0,0.3);
      border: 1px solid rgba(255, 255, 255, 0.2);
      z-index: 1000;
    }

    .audio-toggle:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
      box-shadow: 0 15px 45px rgba(0,0,0,0.4);
    }

    /* Desktop styles */
    @media (min-width: 769px) {
      .container {
        padding: 48px 32px;
        width: 90vw;
      }
      
      h1 {
        font-size: 2.8rem;
        margin-bottom: 48px;
      }
      
      .btn-grid {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
      }
      
      .btn {
        padding: 18px 24px;
        font-size: 0.95rem;
        gap: 12px;
      }
      
      .btn:hover {
        transform: translateY(-8px) scale(1.05);
        box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      }
      
      #datetime {
        font-size: 0.9rem;
        padding: 12px 20px;
      }
      
      footer {
        margin-top: 32px;
        padding: 20px;
        font-size: 14px;
      }
      
      .modal-content {
        padding: 40px;
      }
      
      .modal-content h2 {
        font-size: 2.2rem;
        margin-bottom: 32px;
      }
      
      .project-grid {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 16px;
        margin: 32px 0;
      }
      
      .project-btn {
        padding: 20px;
        font-size: 0.9rem;
      }
      
      #pdfFrame {
        height: 500px;
      }
      
      .modal-close {
        padding: 14px 32px;
        margin-top: 32px;
        font-size: 1rem;
      }
      
      .audio-toggle {
        bottom: 30px;
        right: 30px;
        width: 56px;
        height: 56px;
        font-size: 20px;
      }

      .btn-update-log {
        display: flex;
      }

      .work-experience-item {
        padding: 32px;
      }

      .work-header h3 {
        font-size: 1.6rem;
      }

      .work-details p {
        font-size: 1rem;
      }

      .work-details li {
        font-size: 0.95rem;
      }

      #wanfloristFrame {
        height: 600px;
      }

      .btn-purpose {
        top: 30px;
        right: 100px;
        width: 64px;
        height: 64px;
        font-size: 20px;
      }
    }

    /* Tablet styles */
    @media (min-width: 481px) and (max-width: 768px) {
      .container {
        padding: 32px 20px;
        width: 92vw;
        border-radius: 28px;
      }
      
      h1 {
        font-size: 2.4rem;
        margin-bottom: 36px;
      }
      
      .btn-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
      }
      
      .btn {
        padding: 16px 14px;
        font-size: 0.9rem;
        gap: 10px;
        min-height: 52px;
      }
      
      #datetime {
        font-size: 0.85rem;
        padding: 14px 18px;
      }
      
      footer {
        margin-top: 28px;
        padding: 16px;
        font-size: 12px;
      }
      
      .modal-content {
        padding: 24px;
        border-radius: 24px;
      }
      
      .modal-content h2 {
        font-size: 1.6rem;
        margin-bottom: 24px;
      }
      
      .project-grid {
        grid-template-columns: 1fr;
        gap: 14px;
        margin: 24px 0;
      }
      
      .project-btn {
        padding: 18px;
        font-size: 0.9rem;
      }
      
      #pdfFrame {
        height: 350px;
      }
      
      .modal-close {
        padding: 12px 24px;
        margin-top: 24px;
        font-size: 0.9rem;
      }
      
      .audio-toggle {
        bottom: 20px;
        right: 20px;
        width: 48px;
        height: 48px;
        font-size: 16px;
      }

      .btn-purpose {
        top: 20px;
        right: 80px;
        width: 56px;
        height: 56px;
        font-size: 18px;
      }

      .work-experience-item {
        padding: 24px;
        border-radius: 20px;
      }

      .work-header h3 {
        font-size: 1.4rem;
      }

      .work-details p {
        font-size: 0.95rem;
      }

      .work-details li {
        font-size: 0.9rem;
      }

      #wanfloristFrame {
        height: 400px;
      }
    }

    /* Small mobile adjustments */
    @media (max-width: 480px) {
      h1 { 
        font-size: 2rem; 
        margin-bottom: 24px;
      }
      .container { 
        padding: 20px 12px; 
        margin: 8px 4px;
        width: 96vw;
        max-width: 100vw;
        border-radius: 20px;
      }
      .btn-grid {
        grid-template-columns: 1fr;
        gap: 12px;
      }
      .btn {
        font-size: 0.9rem;
        padding: 16px 12px;
        min-height: 52px;
        border-radius: 16px;
        gap: 8px;
      }
      .btn i {
        font-size: 1.1em;
      }
      #datetime {
        font-size: 0.85rem;
        padding: 12px 16px;
        margin-top: 24px;
      }
      footer {
        font-size: 12px;
        padding: 12px;
        margin-top: 20px;
      }
      .audio-toggle {
        bottom: 15px;
        right: 15px;
        width: 48px;
        height: 48px;
        font-size: 16px;
      }
      .modal-content {
        padding: 20px 16px;
        border-radius: 20px;
        font-size: 0.95rem;
        margin: 10px;
      }
      .modal-content h2 {
        font-size: 1.4rem;
        margin-bottom: 20px;
      }
      .project-grid {
        grid-template-columns: 1fr;
        gap: 12px;
        margin: 16px 0;
      }
      .project-btn {
        padding: 16px;
        font-size: 0.9rem;
        border-radius: 14px;
      }
      #pdfFrame {
        height: 250px;
      }
      .modal-close, .btn-switch-lang {
        font-size: 0.9rem;
        padding: 10px 16px;
        border-radius: 12px;
      }
      .btn-update-log {
        display: none;
      }

      .work-experience-item {
        padding: 20px;
        border-radius: 16px;
      }

      .work-header {
        gap: 10px;
        margin-bottom: 18px;
        padding-bottom: 14px;
      }

      .work-header i {
        font-size: 1.8rem;
      }

      .work-header h3 {
        font-size: 1.3rem;
      }

      .work-details p {
        font-size: 0.9rem;
        margin: 8px 0;
      }

      .work-details ul {
        margin: 8px 0 16px 18px;
      }

      .work-details li {
        font-size: 0.85rem;
        margin: 6px 0;
        line-height: 1.4;
      }

      .work-actions .btn {
        padding: 12px 24px;
        font-size: 0.9rem;
        border-radius: 14px;
      }

      #wanfloristFrame {
        height: 280px;
      }

      .btn-purpose {
        top: 15px;
        right: 15px;
        width: 48px;
        height: 48px;
        font-size: 16px;
      }
    }

    /* Very small screens */
    @media (max-width: 360px) {
      .container {
        width: 98vw;
        margin: 6px 2px;
        padding: 16px 8px;
        border-radius: 16px;
      }
      h1 {
        font-size: 1.8rem;
        margin-bottom: 20px;
      }
      .btn {
        font-size: 0.85rem;
        padding: 14px 10px;
        min-height: 48px;
        border-radius: 14px;
        gap: 6px;
      }
      .btn i {
        font-size: 1em;
      }
      #datetime {
        font-size: 0.8rem;
        padding: 10px 12px;
        margin-top: 20px;
      }
      footer {
        font-size: 11px;
        padding: 10px;
        margin-top: 16px;
      }
      .audio-toggle {
        bottom: 12px;
        right: 12px;
        width: 44px;
        height: 44px;
        font-size: 14px;
      }
      .modal-content {
        padding: 16px 12px;
        border-radius: 16px;
        font-size: 0.9rem;
        margin: 8px;
      }
      .modal-content h2 {
        font-size: 1.2rem;
        margin-bottom: 16px;
      }
      .project-grid {
        gap: 10px;
        margin: 12px 0;
      }
      .project-btn {
        padding: 14px;
        font-size: 0.85rem;
        border-radius: 12px;
      }
      #pdfFrame {
        height: 200px;
      }
      .modal-close, .btn-switch-lang {
        font-size: 0.85rem;
        padding: 8px 12px;
        border-radius: 10px;
      }
      .work-experience-item {
        padding: 16px;
        border-radius: 14px;
      }
      .work-header {
        gap: 8px;
        margin-bottom: 14px;
        padding-bottom: 12px;
      }
      .work-header i {
        font-size: 1.5rem;
      }
      .work-header h3 {
        font-size: 1.1rem;
      }
      .work-details p {
        font-size: 0.85rem;
        margin: 6px 0;
      }
      .work-details ul {
        margin: 6px 0 12px 16px;
      }
      .work-details li {
        font-size: 0.8rem;
        margin: 4px 0;
      }
      .work-actions .btn {
        padding: 10px 20px;
        font-size: 0.85rem;
        border-radius: 12px;
      }
      #wanfloristFrame {
        height: 220px;
      }
      .btn-purpose {
        top: 12px;
        right: 12px;
        width: 44px;
        height: 44px;
        font-size: 14px;
      }
    }

    /* Update Log Button */
    .btn-update-log {
      position: fixed;
      bottom: 30px;
      left: 30px;
      background: linear-gradient(135deg, #28a745, #20c997);
      color: white;
      border: none;
      border-radius: 20px;
      padding: 12px 24px;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      display: none; /* Hidden by default, shown in desktop media query */
      align-items: center;
      gap: 8px;
      z-index: 1000;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }

    .btn-update-log:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 12px 30px rgba(0,0,0,0.3);
    }

    .btn-update-log i {
      font-size: 1.1em;
    }

    /* Update list styling */
    .update-list {
      list-style: none;
      padding: 0;
      margin: 24px 0;
      text-align: left;
    }

    .update-list li {
      background: rgba(255, 255, 255, 0.05);
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 8px;
      border-left: 3px solid #667eea;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .update-list li strong {
      color: #a3b3ff;
    }

    /* Work Experience Styling */
    .work-experience-grid {
      display: grid;
      gap: 24px;
      margin: 24px 0;
    }

    .work-experience-item {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      padding: 24px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
    }

    .work-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .work-header i {
      font-size: 2rem;
      color: #ff6b6b;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
    }

    .work-header h3 {
      font-size: 1.4rem;
      font-weight: 600;
      margin: 0;
      background: linear-gradient(135deg, #fff, #e0e7ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .work-details {
      margin-bottom: 20px;
    }

    .work-details p {
      margin: 8px 0;
      line-height: 1.6;
    }

    .work-details strong {
      color: #a3b3ff;
      font-weight: 600;
    }

    .work-details ul {
      margin: 8px 0 16px 20px;
      padding: 0;
    }

    .work-details li {
      margin: 6px 0;
      line-height: 1.5;
      color: rgba(255, 255, 255, 0.9);
    }

    .work-actions {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    .work-actions .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      font-size: 0.9rem;
      border-radius: 12px;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .work-actions .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
    }

    .btn-purpose {
      position: fixed;
      top: 30px;
      right: 100px;
      top: max(30px, env(safe-area-inset-top) + 10px);
      right: max(100px, env(safe-area-inset-right) + 20px);
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 50%;
      width: 64px;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      font-size: 20px;
      backdrop-filter: blur(20px);
      transition: all 0.4s ease;
      box-shadow: 0 12px 35px rgba(0,0,0,0.3);
      z-index: 1001;
      font-weight: 600;
      gap: 8px;
      padding: 0 18px 0 12px;
      overflow: visible;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .btn-purpose:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
      box-shadow: 0 15px 45px rgba(255, 111, 97, 0.4);
    }
    .btn-purpose i {
      font-size: 1.3em;
      margin-right: 6px;
    }
    .btn-purpose span {
      display: none;
    }
    .btn-switch-lang {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 10px 18px;
      font-weight: 500;
      font-size: 0.9rem;
      cursor: pointer;
      margin-top: 12px;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    /* Landscape orientation adjustments */
    @media (max-height: 500px) and (orientation: landscape) {
      .container {
        padding: 20px 24px;
        margin: 10px;
      }
      
      h1 {
        font-size: 1.8rem;
        margin-bottom: 20px;
      }
      
      .btn-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
        margin-bottom: 20px;
      }
      
      .btn {
        padding: 12px 8px;
        font-size: 0.8rem;
        min-height: 44px;
      }
      
      #datetime {
        margin-top: 20px;
        padding: 8px 16px;
        font-size: 0.8rem;
      }
      
      footer {
        margin-top: 16px;
        padding: 8px 16px;
        font-size: 11px;
      }
      
      .audio-toggle {
        bottom: 10px;
        right: 10px;
        width: 40px;
        height: 40px;
        font-size: 14px;
      }
      
      .btn-purpose {
        top: 10px;
        right: 60px;
        width: 40px;
        height: 40px;
        font-size: 14px;
      }
    }

    /* Touch-friendly improvements */
    @media (hover: none) and (pointer: coarse) {
      .btn {
        min-height: 56px;
        padding: 16px 20px;
      }
      
      .btn:hover {
        transform: none;
      }
      
      .btn:active {
        transform: scale(0.98);
      }
      
      .project-btn {
        min-height: 60px;
        padding: 20px;
      }
      
      .project-btn:hover {
        transform: none;
      }
      
      .project-btn:active {
        transform: scale(0.98);
      }
      
      .audio-toggle {
        min-width: 56px;
        min-height: 56px;
      }
      
      .btn-purpose {
        min-width: 56px;
        min-height: 56px;
      }
      
      .modal-close {
        min-height: 48px;
        padding: 12px 24px;
      }
    }
    .btn-switch-lang:hover {
      background: linear-gradient(135deg, #764ba2, #667eea);
      transform: scale(1.05);
    }
    @media (max-width: 480px) {
      .btn-purpose {
        top: 15px;
        right: 10px;
        width: 44px;
        height: 44px;
        font-size: 14px;
        padding: 0 10px 0 8px;
      }
      .btn-purpose span {
        display: none;
      }
    }
  </style>
</head>
<body oncontextmenu="return false" onkeydown="return disableKey(event)" onselectstart="return false">
  <!-- Purpose Button (outside main container) -->
  <button class="btn-purpose" id="btnPurpose" title="วัตถุประสงค์">
    <i class="fas fa-bullseye"></i>
  </button>
  <!-- Animated background particles -->
  <div class="bg-particles" id="particles"></div>

  <div class="container">
    <h1>Ponrakit Leartrungvichian</h1>
    <div class="btn-grid">
      <a href="https://www.instagram.com/o_ak.k.k.k.k.k.k.k.k.k.k.k.k.k/" target="_blank" class="btn btn-instagram">
        <i class="fab fa-instagram"></i> Instagram
      </a>
      <a href="https://www.facebook.com/Ponrakitts" target="_blank" class="btn btn-facebook">
        <i class="fab fa-facebook-f"></i> Facebook
      </a>
      <a href="https://www.linkedin.com/in/ponrakitt-leartrungvichian-470712207/" target="_blank" class="btn btn-linkedin">
        <i class="fab fa-linkedin-in"></i> LinkedIn
      </a>
      <a href="https://github.com/ponrakitt" target="_blank" class="btn btn-github">
        <i class="fab fa-github"></i> GitHub
      </a>
      <a href="Ponrakit_resume.pdf" download class="btn btn-resume">
        <i class="fas fa-file-alt"></i> Resume
      </a>
      <a href="tel:0615144432" class="btn btn-phone">
        <i class="fas fa-phone-alt"></i> โทร
      </a>
      <a href="mailto:ponrakitt@outlook.co.th" class="btn btn-email">
        <i class="fas fa-envelope"></i> Email
      </a>
      <button class="btn btn-more" id="btnMore">
        <i class="fas fa-folder-open"></i> My Projects
      </button>
      <button class="btn btn-work-experience" id="btnWorkExperience">
        <i class="fas fa-briefcase"></i> Work Experience
      </button>
      <a href="Tracking.html" target="_blank" class="btn btn-manage-apps">
        <i class="fas fa-tasks"></i> Manage Applications
      </a>
    </div>
    <div id="datetime"></div>
  </div>

  <footer>
    © 2025 Ponrakit. All rights reserved. | Last update 30-06-2025 9:00:39
  </footer>

  <!-- Update Log Button -->
  <button class="btn-update-log" id="updateLogBtn">
    <i class="fas fa-history"></i> Update Log
  </button>

  <!-- Maintenance Modal -->
  <div class="modal" id="maintenanceModal">
    <div class="modal-content">
      <h2><i class="fas fa-tools"></i> ปิดปรับปรุงระบบชั่วคราว</h2>
      <p style="font-size: 1.1rem; margin: 24px 0;">ขออภัยในความไม่สะดวก ขณะนี้เว็บไซต์อยู่ในช่วงปิดปรับปรุงประจำสัปดาห์ (ทุกวันอาทิตย์ เวลา 01:00 - 04:00 น.) ขออภัยในความไม่สะดวก</p>
      <p>โปรดกลับมาอีกครั้งใน:</p>
      <div id="countdown" style="font-size: 2rem; font-weight: bold; margin: 16px 0; color: #ffc107;"></div>
      <div id="maintenance-actions" style="margin-top: 24px; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 24px; display: none;">
        <p style="font-size: 0.9rem; margin-bottom: 16px;">คุณยังคงสามารถดำเนินการบางอย่างได้:</p>
        <div id="cloned-buttons-container" style="display: flex; justify-content: center; align-items: center; gap: 16px; flex-wrap: wrap;">
          <!-- Cloned buttons will be injected here by JS -->
        </div>
      </div>
    </div>
  </div>

  <!-- Work Experience Modal -->
  <div class="modal" id="workExperienceModal">
    <div class="modal-content">
      <h2><i class="fas fa-briefcase"></i> ประสบการณ์การทำงาน</h2>
      <div class="work-experience-grid">
        <div class="work-experience-item">
          <div class="work-header">
            <i class="fas fa-flower-tulip"></i>
            <h3>ร้านดอกไม้ Wanflorist</h3>
          </div>
          <div class="work-details">
            <p><strong>ตำแหน่ง:</strong> ทั่วไป</p>
            <p><strong>ระยะเวลา:</strong> 2018 - ปัจจุบัน</p>
            <p><strong>หน้าที่รับผิดชอบ:</strong></p>
            <ul>
              <li>ให้คำแนะนำและบริการลูกค้าในการเลือกดอกไม้</li>
              <li>ดูแลการจัดแสดงสินค้าในหน้าเว็ป</li>
              <li>จัดการระบบการสั่งซื้อ</li>
              <li>จัดการระบบของร้าน</li>
              <li>จัดส่งสินค้าด้วยตัวเอง</li>
            </ul>
            <p><strong>ทักษะที่ได้เรียนรู้:</strong></p>
            <ul>
              <li>การจัดการระบบร้านค้า</li>
              <li>การบริการและการสื่อสาร</li>
              <li>การจัดแต่งหน้าเว็ปของร้าน</li>
              <li>การแก้ปัญหาเฉพาะหน้า</li>
            </ul>
          </div>
          <div class="work-actions">
            <button class="btn btn-website" id="btnWanfloristWebsite">
              <i class="fas fa-external-link-alt"></i> ดูเว็บไซต์ร้าน
            </button>
          </div>
        </div>
      </div>
      <button class="modal-close" id="closeWorkExperienceModal">
        <i class="fas fa-times"></i> ปิด
      </button>
    </div>
  </div>

  <!-- Enhanced Modal -->
  <div class="modal" id="modalPopup">
    <div class="modal-content">
      <h2><i class="fas fa-rocket"></i> My Projects</h2>
      <div class="project-grid">
        <button class="project-btn" onclick="previewPDF('เล่มโปรเจคจบการเตรียมแผ่นนำแสงโดยกระบวน_r 2025-05-22.pdf')">
          <i class="fas fa-lightbulb"></i>
          <strong>Light Guide Plate Fabrication</strong><br>
          <small>Laser Marking & Nanoparticle Coating Processes</small>
        </button>
        <button class="project-btn" onclick="previewPDF('project2-ai-blockchain-integration-2025-long-title-sample.pdf')">
          <i class="fas fa-flask"></i>
          <strong>Chemical Detection System</strong><br>
          <small>Nitrite & Nitrate Detection using Griess Reagent and Gold Nanoparticles</small>
        </button>
        <button class="project-btn" onclick="previewPDF('project3-sustainable-energy-smart-grid-research-document.pdf')">
          <i class="fas fa-atom"></i>
          <strong>Graphene Synthesis</strong><br>
          <small>Laser Ablation Method for Supercapacitor Electrodes</small>
        </button>
        <button class="project-btn" onclick="previewPDF('project5-innovative-materials-for-sustainable-future.pdf')">
          <i class="fas fa-microchip"></i>
          <strong>Microfluidic Device</strong><br>
          <small>First PDMS Device for Chemical Mixing Applications</small>
        </button>
        <button class="project-btn" onclick="previewPDF('project6-advanced-materials-for-sustainable-energy.pdf')">
          <i class="fas fa-cube"></i>
          <strong>DFT Structural Optimization</strong><br>
          <small>Potassium Chloride Analysis via CASTEP</small>
        </button>
      </div>
      
      <div id="pdfPreview" style="display: none;">
        <iframe id="pdfFrame" src=""></iframe>
      </div>
      
      <button class="modal-close" id="closeModal">
        <i class="fas fa-times"></i> ปิด
      </button>
    </div>
  </div>

  <!-- Update Log Modal -->
  <div class="modal" id="updateLogModal">
    <div class="modal-content">
      <h2><i class="fas fa-history"></i> ประวัติการอัปเดต</h2>
      <ul class="update-list">
        <li><strong>26 ก.ค. 2567:</strong> เพิ่มปุ่มและป๊อปอัปสำหรับแสดงประวัติการอัปเดต (Update Log)</li>
        <li><strong>25 ก.ค. 2567:</strong>ปรับขนาดปุ่มทั้งหมดให้เท่ากันเพื่อความสวยงาม</li>
        <li><strong>24 ก.ค. 2567:</strong> เพิ่มเพลงพื้นหลังพร้อมปุ่มเปิด/ปิดเสียง</li>
        <li><strong>23 ก.ค. 2567:</strong> เปิดตัวเวอร์ชันแรกของหน้าเว็บ</li>
      </ul>
      <button class="modal-close" id="closeUpdateLogModal">
        <i class="fas fa-times"></i> ปิด
      </button>
    </div>
  </div>

  <!-- Audio Player & Toggle -->
  <audio id="lofiAudio" autoplay loop></audio>
  <button class="audio-toggle" id="toggleAudio">
    <i id="audioIcon" class="fas fa-volume-up"></i>
  </button>

  <!-- Wanflorist Website Modal -->
  <div class="modal" id="wanfloristModal">
    <div class="modal-content">
      <h2><i class="fas fa-flower-tulip"></i> เว็บไซต์ร้าน Wanflorist</h2>
      <div id="wanfloristFrame" style="width: 100%; height: 500px; border: none; border-radius: 12px; background: #fff; margin: 20px 0;">
        <iframe src="https://www.wanflorist.net/" width="100%" height="100%" frameborder="0" style="border-radius: 12px;"></iframe>
      </div>
      <div style="display: flex; gap: 12px; justify-content: center; margin-top: 20px;">
        <button class="modal-close" id="closeWanfloristModal">
          <i class="fas fa-times"></i> ปิด
        </button>
        <a href="https://www.wanflorist.net/" target="_blank" class="btn btn-website" style="text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
          <i class="fas fa-external-link-alt"></i> เปิดในแท็บใหม่
        </a>
      </div>
    </div>
  </div>

  <!-- Purpose Modal -->
  <div class="modal" id="purposeModal">
    <div class="modal-content">
      <h2><i class="fas fa-bullseye"></i> <span id="purposeTitle">วัตถุประสงค์ของเว็บไซต์</span></h2>
      <div id="purposeTH" style="font-size:1.1rem; margin:24px 0;">
        <ol style="text-align:left; max-width:600px; margin:0 auto;">
          <li>เพื่อใช้เป็นพื้นที่แสดงผลงาน (Portfolio) และประวัติส่วนตัวของข้าพเจ้า</li>
          <li>เพื่อรวบรวมและนำเสนอรายละเอียดโครงการต่าง ๆ ที่เคยดำเนินการ</li>
          <li>เพื่อให้ผู้เยี่ยมชมสามารถดาวน์โหลดไฟล์เรซูเม่ (Resume) และเอกสารผลงานในรูปแบบ PDF ได้อย่างสะดวก</li>
          <li>เพื่อเป็นช่องทางในการติดต่อกับข้าพเจ้าโดยตรงผ่านอีเมลหรือโซเชียลมีเดีย</li>
          <li>เพื่ออัปเดตข่าวสารหรือการเปลี่ยนแปลงที่สำคัญเกี่ยวกับตัวข้าพเจ้าและผลงาน</li>
          <li>เว็บไซต์นี้จัดทำขึ้นเพื่อการนำเสนอข้อมูลเท่านั้น</li>
          <li><b>จะไม่มีการเก็บรวบรวมข้อมูลส่วนบุคคลหรือข้อมูลใด ๆ ของผู้เยี่ยมชมทั้งสิ้น</b></li>
        </ol>
      </div>
      <div id="purposeEN" style="display:none; font-size:1.1rem; margin:24px 0;">
        <ol style="text-align:left; max-width:600px; margin:0 auto;">
          <li>To serve as a portfolio and personal profile for myself</li>
          <li>To collect and present details of various projects I have completed</li>
          <li>To allow visitors to conveniently download my resume and project documents in PDF format</li>
          <li>To provide direct contact channels via email or social media</li>
          <li>To update important news or changes related to myself and my works</li>
          <li>This website is created solely for information presentation</li>
          <li><b>No personal data or any visitor information will be collected or stored by this website</b></li>
        </ol>
      </div>
      <div id="purposeZH" style="display:none; font-size:1.1rem; margin:24px 0;">
        <ol style="text-align:left; max-width:600px; margin:0 auto;">
          <li>作为我的个人作品集和个人简介</li>
          <li>汇集并展示我完成的各类项目详情</li>
          <li>方便访客下载我的简历和项目文档（PDF格式）</li>
          <li>提供通过电子邮件或社交媒体直接联系的渠道</li>
          <li>更新与我本人及作品相关的重要新闻或变更</li>
          <li>本网站仅用于信息展示</li>
          <li><b>本网站不会收集或存储任何访问者的个人信息或数据</b></li>
        </ol>
      </div>
      <div id="purposeJP" style="display:none; font-size:1.1rem; margin:24px 0;">
        <ol style="text-align:left; max-width:600px; margin:0 auto;">
          <li>自身のポートフォリオおよびプロフィールとして活用するため</li>
          <li>これまでに手掛けた様々なプロジェクトの詳細をまとめて紹介するため</li>
          <li>訪問者が履歴書やプロジェクト資料（PDF）を便利にダウンロードできるようにするため</li>
          <li>メールやSNSを通じて直接連絡できる手段を提供するため</li>
          <li>自分自身や作品に関する重要なお知らせや変更を更新するため</li>
          <li>本ウェブサイトは情報提供のみを目的としています</li>
          <li><b>本ウェブサイトは訪問者の個人情報やデータを一切収集・保存しません</b></li>
        </ol>
      </div>
      <button class="modal-close" id="closePurposeModal">
        <i class="fas fa-times"></i> ปิด / Close
      </button>
      <button class="btn-switch-lang" id="switchLangBtn" style="margin-left:16px;">
        <i class="fas fa-language"></i> <span id="switchLangLabel">English</span>
      </button>
    </div>
  </div>

  <!-- Maintenance Alert Bar -->
  <div id="maintenanceAlertBar" style="display:none; position:fixed; top:32px; left:32px; min-width:240px; max-width:320px; background:linear-gradient(90deg,#ff9800,#ff6f00); color:#fff; text-align:left; padding:12px 20px; font-weight:500; font-size:0.95rem; z-index:20000; box-shadow:0 4px 16px rgba(0,0,0,0.18); line-height:1.4; border-radius:12px; box-sizing:border-box; transition:opacity 0.3s, transform 0.3s; opacity:0.95; display:flex; align-items:center; gap:10px;">
    <i class="fas fa-exclamation-triangle" style="font-size:1.2em; margin-right:8px;"></i>
    <span id="maintenanceAlertText"></span>
  </div>

  <!-- Unsupported Browser Bar -->
  <div id="unsupportedBrowserBar" style="display:none; position:fixed; top:0; left:0; width:100vw; background:linear-gradient(90deg,#ff6f00,#ff9800); color:#fff; text-align:center; padding:14px 10px; font-weight:600; font-size:1rem; z-index:30000; box-shadow:0 4px 16px rgba(0,0,0,0.18); line-height:1.5; border-radius:0 0 12px 12px; box-sizing:border-box;">
    <span id="unsupportedBrowserText">เว็บไซต์นี้อาจใช้งานได้ไม่เต็มที่ในเบราว์เซอร์นี้ กรุณาใช้ Google Chrome, Firefox, Safari หรือ Microsoft Edge เพื่อประสบการณ์ที่ดีที่สุด</span>
    <button id="copySiteLinkBtn" style="margin-left:16px; background:#fff; color:#ff6f00; border:none; border-radius:8px; padding:6px 16px; font-weight:600; cursor:pointer;">Copy Link</button>
  </div>

  <script>
    let isMaintenanceActive = false;

    // Maintenance Mode Functionality
    function checkMaintenance() {
      // --- ตั้งค่าเวลาปิดปรับปรุงที่นี่ ---
      const maintenanceDay = 0;        // วันที่ต้องการปิดปรับปรุง (0=อาทิตย์, 1=จันทร์, ..., 6=เสาร์)
      const maintenanceStartHour =1;  // เวลาเริ่มต้น (ตี 1)
      const maintenanceEndHour = 4;    // เวลาสิ้นสุด (ตี 4)
      // ----------------------------------------------------

      const now = new Date();
      const currentDay = now.getDay();
      const currentHour = now.getHours();
      let inMaintenance = false;

      // ตรวจสอบว่าเป็นวันอาทิตย์ และอยู่ในช่วงเวลา ตี 1 - ตี 4 หรือไม่
      if (currentDay === maintenanceDay && (currentHour >= maintenanceStartHour && currentHour < maintenanceEndHour)) {
        inMaintenance = true;
      }
      
      if (inMaintenance) {
        isMaintenanceActive = true;
        const modal = document.getElementById('maintenanceModal');
        modal.classList.add('active');
        
        const countdownElement = document.getElementById('countdown');
        const maintenanceEndTime = new Date();
        maintenanceEndTime.setHours(maintenanceEndHour, 0, 0, 0);

        function updateCountdown() {
            const currentTime = new Date();
            const timeLeft = maintenanceEndTime - currentTime;

            if (timeLeft <= 0) {
              clearInterval(countdownInterval);
              window.location.reload();
              return;
            }
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            countdownElement.innerHTML = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }
        
        const countdownInterval = setInterval(updateCountdown, 1000);
        updateCountdown();

        // --- Clone buttons to be available during maintenance ---
        const resumeLink = document.querySelector('a.btn-resume');
        const audioToggle = document.getElementById('toggleAudio');
        const actionsContainer = document.getElementById('maintenance-actions');
        const buttonsContainer = document.getElementById('cloned-buttons-container');

        if (resumeLink && audioToggle && buttonsContainer && actionsContainer) {
          actionsContainer.style.display = 'block';

          // 1. Clone Resume Button
          const resumeClone = resumeLink.cloneNode(true);
          buttonsContainer.appendChild(resumeClone);

          // 2. Clone Audio Toggle Button
          const audioToggleClone = audioToggle.cloneNode(true);
          audioToggleClone.id = 'audioToggleClone'; // Prevent duplicate ID
          
          audioToggleClone.addEventListener('click', () => {
            audioToggle.click(); // Relay click to original button
          });
          buttonsContainer.appendChild(audioToggleClone);

          // 3. Sync icon state from original to clone
          const originalIcon = document.getElementById('audioIcon');
          const clonedIcon = audioToggleClone.querySelector('i');
          if(originalIcon && clonedIcon) {
            const observer = new MutationObserver(() => {
              clonedIcon.className = originalIcon.className;
            });
            observer.observe(originalIcon, { attributes: true, attributeFilter: ['class'] });
          }
        }
      }
    }
    checkMaintenance();

    // Maintenance Alert Bar (แจ้งเตือนก่อนปิดปรับปรุง 30 นาที)
    function showMaintenanceAlertBar() {
      // --- ตั้งค่าเวลาปิดปรับปรุงที่นี่ (ต้องตรงกับ checkMaintenance) ---
      const maintenanceDay = 2;        // 0=อาทิตย์, 1=จันทร์, ..., 6=เสาร์
      const maintenanceStartHour = 9;  // ตี 1
      // ----------------------------------------------------
      const now = new Date();
      const currentDay = now.getDay();
      const currentHour = now.getHours();
      const currentMinute = now.getMinutes();

      // หาเวลาปิดปรับปรุงรอบถัดไป
      let nextMaintenance = new Date(now);
      nextMaintenance.setDate(now.getDate() + ((maintenanceDay - currentDay + 7) % 7));
      nextMaintenance.setHours(maintenanceStartHour, 0, 0, 0);

      // ถ้าวันนี้เลย maintenanceStartHour ไปแล้ว ให้เลื่อนไปอาทิตย์หน้า
      if (
        currentDay === maintenanceDay &&
        (currentHour > maintenanceStartHour || (currentHour === maintenanceStartHour && currentMinute >= 0))
      ) {
        nextMaintenance.setDate(nextMaintenance.getDate() + 7);
      }

      function updateAlertBar() {
        const now = new Date();
        const timeLeft = nextMaintenance - now;
        const bar = document.getElementById('maintenanceAlertBar');
        const text = document.getElementById('maintenanceAlertText');
        if (timeLeft <= 0) {
          bar.style.display = 'none';
          clearInterval(alertInterval);
          return;
        }
        // ถ้าเหลือไม่เกิน 30 นาที (1800000 ms)
        if (timeLeft <= 30 * 60 * 1000) {
          bar.style.display = 'block';
          const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
          text.innerHTML = `เว็บไซต์จะปิดปรับปรุงในอีก <b>${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}</b> นาทีนะครับ`;
        } else {
          bar.style.display = 'none';
        }
      }
      updateAlertBar();
      const alertInterval = setInterval(updateAlertBar, 1000);
    }
    showMaintenanceAlertBar();

    // Create animated particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = window.innerWidth < 768 ? 30 : 50;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.width = Math.random() * 4 + 2 + 'px';
        particle.style.height = particle.style.width;
        particle.style.animationDelay = Math.random() * 20 + 's';
        particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
        particlesContainer.appendChild(particle);
      }
    }
    createParticles();

    // Modal functionality
    const btnMore = document.getElementById('btnMore');
    const modal = document.getElementById('modalPopup');
    const closeModal = document.getElementById('closeModal');
    const pdfPreview = document.getElementById('pdfPreview');

    btnMore.onclick = () => modal.classList.add('active');
    closeModal.onclick = () => {
      modal.classList.remove('active');
      pdfPreview.style.display = 'none';
    };
    modal.onclick = (e) => { 
      if (e.target === modal) {
        modal.classList.remove('active');
        pdfPreview.style.display = 'none';
      }
    };
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        modal.classList.remove('active');
        pdfPreview.style.display = 'none';
      }
    });

    function previewPDF(pdfUrl) {
      document.getElementById('pdfFrame').src = pdfUrl;
      pdfPreview.style.display = 'block';
    }

    function disableKey(e) {
      if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
        e.preventDefault();
        return false;
      }
    }

    // DateTime update
    function updateDateTime() {
      const now = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', timeZone: 'Asia/Bangkok' };
      const time = now.toLocaleTimeString('th-TH', { timeZone: 'Asia/Bangkok' });
      const date = now.toLocaleDateString('th-TH', options);
      document.getElementById('datetime').innerText = `${date} ${time}`;
    }
    updateDateTime();
    setInterval(updateDateTime, 1000);

    // Audio functionality
    const audio = document.getElementById('lofiAudio');
    const toggleBtn = document.getElementById('toggleAudio');
    const audioIcon = document.getElementById('audioIcon');
    const playlist = [
      'forest-guitar-lofi-161108.mp3',
      'summer-rain-lofi-vibes-216043.mp3',
      'summer-sunset-lofi-slow-mix-154447.mp3',
      'good-night-lofi-cozy-chill-music-160166.mp3',
    ];
    let currentSong = Math.floor(Math.random() * playlist.length);
    
    function loadSong(index) {
      audio.src = playlist[index];
      audio.play().catch(e => console.log('Audio autoplay prevented'));
    }
    loadSong(currentSong);

    toggleBtn.addEventListener('click', () => {
      if (audio.paused) {
        audio.play();
        audioIcon.classList.replace('fa-volume-mute', 'fa-volume-up');
      } else {
        audio.pause();
        audioIcon.classList.replace('fa-volume-up', 'fa-volume-mute');
      }
    });

    // Prevent right-click
    document.addEventListener('contextmenu', function (e) {
      e.preventDefault();
    });

    // Prevent right-click on PDF iframe
    const iframe = document.getElementById('pdfFrame');
    iframe.addEventListener('load', () => {
      const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
      if (iframeDoc) {
        iframeDoc.addEventListener('contextmenu', function (e) {
          e.preventDefault();
        });
      }
    });

    // Handle window resize for particles
    window.addEventListener('resize', () => {
      const particlesContainer = document.getElementById('particles');
      particlesContainer.innerHTML = '';
      createParticles();
    });

    // Update Log Modal functionality
    const updateLogBtnTrack = document.getElementById('updateLogBtn');
    const updateLogModal = document.getElementById('updateLogModal');
    const closeUpdateLogModal = document.getElementById('closeUpdateLogModal');

    // Work Experience Modal functionality
    const btnWorkExperienceTrack = document.getElementById('btnWorkExperience');
    const workExperienceModal = document.getElementById('workExperienceModal');
    const closeWorkExperienceModal = document.getElementById('closeWorkExperienceModal');

    if (updateLogBtnTrack) {
      updateLogBtnTrack.onclick = () => updateLogModal.classList.add('active');
      // Track Update Log button
      updateLogBtnTrack.addEventListener('click', function() {
        trackButtonClick('Update Log');
      });
    }
    if (btnWorkExperienceTrack) {
      btnWorkExperienceTrack.onclick = () => workExperienceModal.classList.add('active');
      // Track Work Experience button
      btnWorkExperienceTrack.addEventListener('click', function() {
        trackButtonClick('Work Experience');
      });
    }
    if (closeUpdateLogModal) {
      closeUpdateLogModal.onclick = () => updateLogModal.classList.remove('active');
    }
    if (closeWorkExperienceModal) {
      closeWorkExperienceModal.onclick = () => workExperienceModal.classList.remove('active');
    }
    if (updateLogModal) {
      updateLogModal.onclick = (e) => {
        if (e.target === updateLogModal) {
          updateLogModal.classList.remove('active');
        }
      };
    }
    if (workExperienceModal) {
      workExperienceModal.onclick = (e) => {
        if (e.target === workExperienceModal) {
          workExperienceModal.classList.remove('active');
        }
      };
    }

    document.addEventListener('keydown', e => {
      if (isMaintenanceActive) { return; } // Block escape key during maintenance

      if (e.key === 'Escape') {
        // Close project modal
        modal.classList.remove('active');
        pdfPreview.style.display = 'none';
        // Close update log modal
        if (updateLogModal) {
          updateLogModal.classList.remove('active');
        }
        // Close work experience modal
        if (workExperienceModal) {
          workExperienceModal.classList.remove('active');
        }
        // Close wanflorist modal
        if (wanfloristModal) {
          wanfloristModal.classList.remove('active');
        }
      }
    });

    function previewPDF(pdfUrl) {
      document.getElementById('pdfFrame').src = pdfUrl;
      pdfPreview.style.display = 'block';
    }

    // === Tracking Button Clicks ===
    function trackButtonClick(buttonName) {
      fetch('https://your-app.onrender.com/track-click', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ button: buttonName, time: new Date().toISOString() })
      }).catch(e => console.log('Track error:', e));
    }

    // Track .btn-grid buttons
    document.querySelectorAll('.btn-grid .btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const label = btn.innerText.trim().replace(/\s+/g, ' ');
        trackButtonClick(label);
      });
    });

    // Track project modal buttons
    document.querySelectorAll('.project-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const label = btn.innerText.trim().replace(/\s+/g, ' ');
        trackButtonClick('Project: ' + label);
      });
    });

    // === Wanflorist Website Modal Functionality ===
    const btnWanfloristWebsite = document.getElementById('btnWanfloristWebsite');
    const wanfloristModal = document.getElementById('wanfloristModal');
    const closeWanfloristModal = document.getElementById('closeWanfloristModal');

    if (btnWanfloristWebsite) {
      btnWanfloristWebsite.onclick = () => wanfloristModal.classList.add('active');
      // Track Wanflorist Website button
      btnWanfloristWebsite.addEventListener('click', function() {
        trackButtonClick('Wanflorist Website');
      });
    }
    if (closeWanfloristModal) {
      closeWanfloristModal.onclick = () => wanfloristModal.classList.remove('active');
    }
    if (wanfloristModal) {
      wanfloristModal.onclick = (e) => {
        if (e.target === wanfloristModal) {
          wanfloristModal.classList.remove('active');
        }
      };
    }

    // === Purpose Modal Functionality ===
    const btnPurpose = document.getElementById('btnPurpose');
    const purposeModal = document.getElementById('purposeModal');
    const closePurposeModal = document.getElementById('closePurposeModal');
    const switchLangBtn = document.getElementById('switchLangBtn');
    const purposeTH = document.getElementById('purposeTH');
    const purposeEN = document.getElementById('purposeEN');
    const purposeZH = document.getElementById('purposeZH');
    const purposeJP = document.getElementById('purposeJP');
    const purposeTitle = document.getElementById('purposeTitle');
    const purposeBtnLabel = document.getElementById('purposeBtnLabel');
    const switchLangLabel = document.getElementById('switchLangLabel');
    let langIndex = 0;
    const langs = [
      {
        code: 'TH',
        show: [purposeTH],
        hide: [purposeEN, purposeZH, purposeJP],
        title: 'วัตถุประสงค์ของเว็บไซต์',
        btn: 'วัตถุประสงค์',
        switchLabel: 'English'
      },
      {
        code: 'EN',
        show: [purposeEN],
        hide: [purposeTH, purposeZH, purposeJP],
        title: 'Website Purpose',
        btn: 'Purpose',
        switchLabel: '中文'
      },
      {
        code: 'ZH',
        show: [purposeZH],
        hide: [purposeTH, purposeEN, purposeJP],
        title: '网站宗旨',
        btn: '宗旨',
        switchLabel: '日本語'
      },
      {
        code: 'JP',
        show: [purposeJP],
        hide: [purposeTH, purposeEN, purposeZH],
        title: 'ウェブサイトの目的',
        btn: '目的',
        switchLabel: 'ภาษาไทย'
      }
    ];
    function setLang(idx) {
      langs[idx].show.forEach(el => el.style.display = '');
      langs[idx].hide.forEach(el => el.style.display = 'none');
      purposeTitle.innerText = langs[idx].title;
      switchLangLabel.innerText = langs[idx].switchLabel;
      btnPurpose.title = langs[idx].title;
    }
    setLang(langIndex);
    btnPurpose.onclick = () => purposeModal.classList.add('active');
    closePurposeModal.onclick = () => purposeModal.classList.remove('active');
    switchLangBtn.onclick = () => {
      langIndex = (langIndex + 1) % langs.length;
      setLang(langIndex);
    };
    purposeModal.onclick = (e) => {
      if (e.target === purposeModal) {
        purposeModal.classList.remove('active');
      }
    };
    document.addEventListener('keydown', e => {
      if (purposeModal.classList.contains('active') && e.key === 'Escape') {
        purposeModal.classList.remove('active');
      }
    });

    // ===== Browser Compatibility Check =====
    function isSupportedBrowser() {
      const ua = navigator.userAgent;
      // รองรับ Chrome, Firefox, Safari, Edge (ไม่รองรับ IE, Opera, UC, Samsung, ฯลฯ)
      if (/Chrome\//.test(ua) && !/Edg\//.test(ua) && !/OPR\//.test(ua)) return true; // Chrome
      if (/Firefox\//.test(ua)) return true; // Firefox
      if (/Safari\//.test(ua) && !/Chrome\//.test(ua) && !/Chromium\//.test(ua)) return true; // Safari
      if (/Edg\//.test(ua)) return true; // Edge
      // ตรวจจับ in-app browser ของ Line, Instagram, Facebook
      if (/Line\//i.test(ua) || /Instagram/i.test(ua) || /FBAN|FBAV|FB_IAB|FB4A|FBAN/i.test(ua)) return false;
      return false;
    }
    window.addEventListener('DOMContentLoaded', function() {
      if (!isSupportedBrowser() || !window.Promise || !window.fetch || !window.addEventListener) {
        const bar = document.getElementById('unsupportedBrowserBar');
        bar.style.display = 'block';
        const copyBtn = document.getElementById('copySiteLinkBtn');
        copyBtn.onclick = function() {
          navigator.clipboard.writeText('https://ponrakitt.site/').then(function() {
            copyBtn.innerText = 'คัดลอกแล้ว!';
            setTimeout(()=>{copyBtn.innerText = 'Copy Link';}, 2000);
          });
        };
      }
    });
  </script>
  <!--Start of Tawk.to Script-->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/6927a795f7575c1961e05edd/1jb1ed81p';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>
<!--End of Tawk.to Script-->
<style>
    /* --- Styles โครงสร้าง Popup (เหมือนเดิม) --- */
    .ny-modal-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-color: rgba(0, 0, 0, 0.85);
        display: flex; justify-content: center; align-items: center;
        z-index: 99999; backdrop-filter: blur(8px);
        opacity: 0; visibility: hidden; transition: opacity 0.4s ease;
    }
    .ny-popup-box {
        background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
        color: #ffffff; padding: 35px; border-radius: 20px;
        text-align: center; position: relative;
        width: 90%; max-width: 500px;
        max-height: 90vh; overflow-y: auto;
        box-shadow: 0 0 30px rgba(255, 215, 0, 0.2);
        border: 1px solid rgba(255, 215, 0, 0.5); 
        font-family: 'Sarabun', sans-serif;
        transform: scale(0.9); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .ny-modal-overlay.show { opacity: 1; visibility: visible; }
    .ny-modal-overlay.show .ny-popup-box { transform: scale(1); }
    
    .ny-title { font-size: 2em; margin: 0 0 10px 0; color: #ffd700; text-transform: uppercase; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
    .ny-subtitle { font-size: 1.1em; margin-bottom: 25px; color: #cfcfcf; }
    
    /* Countdown Design */
    .ny-countdown { display: flex; justify-content: center; gap: 12px; margin-bottom: 25px; flex-wrap: wrap; }
    .ny-time-unit { 
        background: rgba(255, 255, 255, 0.05); padding: 10px 15px; 
        border-radius: 12px; min-width: 65px; 
        border: 1px solid rgba(255, 255, 255, 0.1); 
        box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    }
    .ny-number { font-size: 1.8em; font-weight: 700; color: #ffd700; line-height: 1.1; display: block; }
    .ny-label { font-size: 0.75em; color: #aaa; text-transform: uppercase; letter-spacing: 1px; }
    
    .ny-close-btn { position: absolute; top: 15px; right: 20px; font-size: 24px; cursor: pointer; color: #888; transition: 0.3s; }
    .ny-close-btn:hover { color: #fff; transform: rotate(90deg); }
    
    /* Card Generator Section */
    .ny-card-section {
        margin-top: 25px; padding-top: 20px;
        border-top: 1px solid rgba(255,255,255,0.1);
    }
    .ny-card-header { font-size: 1.1em; color: #fff; margin-bottom: 15px; font-weight: 600; }
    .ny-lang-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
    .ny-lang-btn {
        background: linear-gradient(to bottom, #2a2a2a, #1a1a1a); 
        border: 1px solid #444; color: #ccc; 
        padding: 10px; border-radius: 8px; cursor: pointer;
        font-size: 0.9em; transition: all 0.2s;
    }
    .ny-lang-btn:hover { background: #ffd700; color: #000; border-color: #ffd700; box-shadow: 0 0 15px rgba(255, 215, 0, 0.4); }
    
    .ny-site-btn {
        background: transparent; border: 1px solid rgba(255,255,255,0.3); color: rgba(255,255,255,0.7);
        padding: 10px 30px; font-size: 1em; border-radius: 50px; cursor: pointer; transition: 0.3s;
    }
    .ny-site-btn:hover { border-color: #fff; color: #fff; background: rgba(255,255,255,0.1); }

    #nyCanvas { display: none; }
</style>

<div class="ny-modal-overlay" id="newYearPopup">
    <div class="ny-popup-box">
        <span class="ny-close-btn" onclick="closePopup()">&times;</span>
        
        <h1 class="ny-title">Happy New Year</h1>
        <p class="ny-subtitle">นับถอยหลังสู่การเริ่มต้นใหม่ <span id="nextYearDisplay"></span></p>
        
        <div class="ny-countdown">
            <div class="ny-time-unit"><span class="ny-number" id="ny-days">00</span><span class="ny-label">Days</span></div>
            <div class="ny-time-unit"><span class="ny-number" id="ny-hours">00</span><span class="ny-label">Hrs</span></div>
            <div class="ny-time-unit"><span class="ny-number" id="ny-minutes">00</span><span class="ny-label">Min</span></div>
            <div class="ny-time-unit"><span class="ny-number" id="ny-seconds">00</span><span class="ny-label">Sec</span></div>
        </div>

        <div class="ny-card-section">
            <div class="ny-card-header">🎁 ดาวน์โหลดการ์ดอวยพร (สุ่มดีไซน์)</div>
            <div class="ny-lang-grid">
                <button class="ny-lang-btn" onclick="generateProCard('th')">🇹🇭 ไทย</button>
                <button class="ny-lang-btn" onclick="generateProCard('en')">🇬🇧 Eng</button>
                <button class="ny-lang-btn" onclick="generateProCard('cn')">🇨🇳 จีน</button>
                <button class="ny-lang-btn" onclick="generateProCard('jp')">🇯🇵 ญี่ปุ่น</button>
                <button class="ny-lang-btn" onclick="generateProCard('fr')">🇫🇷 ฝรั่งเศส</button>
                <button class="ny-lang-btn" onclick="generateProCard('random')">🎲 สุ่มเลย</button>
            </div>
        </div>

        <button class="ny-site-btn" onclick="closePopup()">เข้าสู่เว็บไซต์</button>
    </div>
</div>

<canvas id="nyCanvas" width="1080" height="1080"></canvas>

<script>
    (function() {
        const nextYear = new Date().getFullYear() + 1;
        document.getElementById('nextYearDisplay').innerText = nextYear;

        // --- 1. Countdown Logic ---
        const countToDate = new Date(`Jan 1, ${nextYear} 00:00:00`).getTime();
        const updateTimer = setInterval(() => {
            const now = new Date().getTime();
            const distance = countToDate - now;
            
            const d = Math.floor(distance / (1000 * 60 * 60 * 24));
            const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((distance % (1000 * 60)) / 1000);

            if(document.getElementById("ny-days")) {
                document.getElementById("ny-days").innerText = d;
                document.getElementById("ny-hours").innerText = h < 10 ? '0' + h : h;
                document.getElementById("ny-minutes").innerText = m < 10 ? '0' + m : m;
                document.getElementById("ny-seconds").innerText = s < 10 ? '0' + s : s;
            }
            if (distance < 0) clearInterval(updateTimer);
        }, 1000);

        // --- 2. Popup Control ---
        window.closePopup = () => document.getElementById('newYearPopup').classList.remove('show');
        setTimeout(() => document.getElementById('newYearPopup').classList.add('show'), 500);

        // --- 3. Pro Card Generator ---
        
        // คลังคำอวยพร 5 แบบ ต่อ 1 ภาษา
        const wishDB = {
            'th': [
                ["สวัสดีปีใหม่", "ขอสิ่งศักดิ์สิทธิ์คุ้มครอง\nให้แคล้วคลาดปลอดภัย"],
                ["Happy New Year", "ขอให้ปีนี้เป็นปีทองของคุณ\nร่ำรวย เงินไหลกอง ทองไหลมา"],
                ["สวัสดีปีใหม่ครับ", "สุขภาพแข็งแรง\nโรคภัยไม่เบียดเบียน\nอายุยืนหมื่นปี"],
                ["สุขสันต์วันปีใหม่", "ขอให้มีความสุขมากๆ\nคิดสิ่งใดสมความปรารถนาทุกประการ"],
                ["เริ่มต้นปีใหม่", "ทิ้งเรื่องร้ายไว้ปีเก่า\nเปิดรับสิ่งดีๆ เข้ามาในชีวิต"]
            ],
            'en': [
                ["Happy New Year", "Wishing you a year fully loaded\nwith happiness and success."],
                ["Cheers to " + nextYear, "New adventures are around the corner.\nHappy New Year!"],
                ["Season's Greetings", "May your year be filled with\njoy, love, and laughter."],
                ["Happy New Year!", "Wishing you prosperity\nand good health in the coming year."],
                ["New Year, New You", "May all your dreams\nturn into reality this year."]
            ],
            'cn': [ // จีน
                ["新年快乐", "ขอให้มีความสุขในวันปีใหม่\n(Xīnnián kuàilè)"],
                ["恭喜发财", "ขอให้ร่ำรวย มั่งคั่ง\n(Gōngxǐ fācái)"],
                ["万事如意", "ขอให้สมปรารถนาในทุกสิ่ง\n(Wànshì rúyì)"],
                ["身体健康", "ขอให้สุขภาพร่างกายแข็งแรง\n(Shēntǐ jiànkāng)"],
                ["年年有余", "ขอให้มีเงินมีทองเหลือใช้ทุกปี\n(Niánnián yǒuyú)"]
            ],
            'jp': [ // ญี่ปุ่น
                ["あけましておめでとう", "สวัสดีปีใหม่ ขอฝากเนื้อฝากตัวด้วยนะ"],
                ["Happy New Year", "ขอให้เป็นปีที่เต็มไปด้วยรอยยิ้ม"],
                ["謹賀新年", "ขอให้ปีใหม่นำพาแต่ความสุขมาให้"],
                ["良いお年を", "ขอให้สุขภาพแข็งแรงตลอดปี"],
                ["新年おめでとう", "ขอให้ความฝันเป็นจริงในปีนี้"]
            ],
            'fr': [ // ฝรั่งเศส
                ["Bonne Année", "สวัสดีปีใหม่ ขอให้มีความสุข"],
                ["Meilleurs Vœux", "ด้วยความปรารถนาดีสำหรับปีใหม่"],
                ["Santé et Bonheur", "ขอให้มีสุขภาพดีและความสุข"],
                ["Joyeuses Fêtes", "ขอให้สนุกสนานในเทศกาลนี้"],
                ["Bonne Année " + nextYear, "ขอให้เป็นปีที่ยอดเยี่ยมของคุณ"]
            ]
        };

        window.generateProCard = function(lang) {
            // สุ่มภาษาถ้าเลือก random
            if(lang === 'random') {
                const keys = Object.keys(wishDB);
                lang = keys[Math.floor(Math.random() * keys.length)];
            }
            
            // สุ่มคำอวยพร (0-4)
            const wishSet = wishDB[lang][Math.floor(Math.random() * wishDB[lang].length)];
            const headText = wishSet[0];
            const bodyText = wishSet[1];

            // เตรียม Canvas
            const cvs = document.getElementById('nyCanvas');
            const ctx = cvs.getContext('2d');
            const w = cvs.width;
            const h = cvs.height;

            // สุ่ม Theme พื้นหลัง (1-5)
            const themeId = Math.floor(Math.random() * 5) + 1;
            drawTheme(ctx, w, h, themeId);

            // วาดข้อความ
            drawText(ctx, w, h, headText, bodyText, themeId);

            // วาด Footer เครดิต
            ctx.font = "30px sans-serif";
            ctx.fillStyle = "rgba(255,255,255,0.6)";
            ctx.textAlign = "center";
            ctx.shadowBlur = 0;
            ctx.fillText(window.location.hostname + " © " + nextYear, w/2, h - 40);

            // ดาวน์โหลด
            const link = document.createElement('a');
            link.download = `HNY-${nextYear}-${lang}-${Date.now()}.jpg`;
            link.href = cvs.toDataURL("image/jpeg", 0.9);
            link.click();
        }

        // --- Theme Engine ---
        function drawTheme(ctx, w, h, id) {
            // Clear
            ctx.clearRect(0,0,w,h);
            
            if (id === 1) { // Luxury Gold
                let grd = ctx.createRadialGradient(w/2, h/2, 0, w/2, h/2, w);
                grd.addColorStop(0, "#2c2c2c");
                grd.addColorStop(1, "#000000");
                ctx.fillStyle = grd; ctx.fillRect(0,0,w,h);
                
                // Gold Particles
                for(let i=0; i<150; i++) {
                    ctx.beginPath();
                    ctx.arc(Math.random()*w, Math.random()*h, Math.random()*3, 0, Math.PI*2);
                    ctx.fillStyle = `rgba(255, 215, 0, ${Math.random()})`;
                    ctx.fill();
                }
                // Gold Border
                ctx.strokeStyle = "#ffd700"; ctx.lineWidth = 10;
                ctx.strokeRect(40,40,w-80,h-80);
            } 
            else if (id === 2) { // Midnight Fireworks
                let grd = ctx.createLinearGradient(0,0,0,h);
                grd.addColorStop(0, "#021B79");
                grd.addColorStop(1, "#000000");
                ctx.fillStyle = grd; ctx.fillRect(0,0,w,h);
                
                // Draw Fireworks (Simple Lines)
                drawFirework(ctx, w*0.2, h*0.3, "#FF5733");
                drawFirework(ctx, w*0.8, h*0.2, "#33FF57");
                drawFirework(ctx, w*0.5, h*0.5, "#3357FF");
            }
            else if (id === 3) { // Oriental Red (มงคล)
                let grd = ctx.createLinearGradient(0,0,w,h);
                grd.addColorStop(0, "#D31027");
                grd.addColorStop(1, "#EA384D");
                ctx.fillStyle = grd; ctx.fillRect(0,0,w,h);
                
                // Pattern
                ctx.strokeStyle = "rgba(255, 215, 0, 0.2)"; ctx.lineWidth = 2;
                for(let i=0; i<w; i+=40) { ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,h); ctx.stroke(); }
                
                // Gold Inner Frame
                ctx.strokeStyle = "#FFD700"; ctx.lineWidth = 20;
                ctx.strokeRect(60,60,w-120,h-120);
            }
            else if (id === 4) { // Modern Bokeh
                let grd = ctx.createLinearGradient(0,0,w,h);
                grd.addColorStop(0, "#8E2DE2");
                grd.addColorStop(1, "#4A00E0");
                ctx.fillStyle = grd; ctx.fillRect(0,0,w,h);
                
                // Bokeh
                for(let i=0; i<20; i++) {
                    ctx.beginPath();
                    ctx.arc(Math.random()*w, Math.random()*h, Math.random()*100+50, 0, Math.PI*2);
                    ctx.fillStyle = `rgba(255, 255, 255, ${Math.random()*0.1})`;
                    ctx.fill();
                }
            }
            else { // Silver Frost
                let grd = ctx.createLinearGradient(0,0,0,h);
                grd.addColorStop(0, "#E0EAFC");
                grd.addColorStop(1, "#CFDEF3");
                ctx.fillStyle = grd; ctx.fillRect(0,0,w,h);
                
                // Snowflakes
                ctx.fillStyle = "#FFF";
                for(let i=0; i<100; i++) {
                    ctx.beginPath();
                    ctx.arc(Math.random()*w, Math.random()*h, Math.random()*4, 0, Math.PI*2);
                    ctx.fill();
                }
            }
        }

        function drawText(ctx, w, h, head, body, themeId) {
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            
            // Determine Text Color based on theme
            let titleColor = "#FFD700"; // Gold Default
            let bodyColor = "#FFFFFF";
            let shadow = "rgba(0,0,0,0.8)";
            
            if (themeId === 5) { // Silver needs dark text
                titleColor = "#2c3e50";
                bodyColor = "#34495e";
                shadow = "rgba(255,255,255,0.5)";
            }

            // Title
            ctx.font = "bold 120px sans-serif";
            ctx.fillStyle = titleColor;
            ctx.shadowColor = shadow;
            ctx.shadowBlur = 15;
            ctx.shadowOffsetX = 5; ctx.shadowOffsetY = 5;
            ctx.fillText(head, w/2, h/2 - 80);

            // Body (Multi-line)
            ctx.font = "60px sans-serif";
            ctx.fillStyle = bodyColor;
            ctx.shadowBlur = 10;
            
            const lines = body.split('\n');
            const lineHeight = 80;
            const startY = h/2 + 60;
            
            for(let i=0; i<lines.length; i++) {
                ctx.fillText(lines[i], w/2, startY + (i*lineHeight));
            }
        }

        function drawFirework(ctx, x, y, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            for(let i=0; i<8; i++) {
                ctx.beginPath();
                ctx.moveTo(x, y);
                const angle = (Math.PI*2 * i) / 8;
                ctx.lineTo(x + Math.cos(angle)*100, y + Math.sin(angle)*100);
                ctx.stroke();
            }
        }

    })();
</script>
</body>
</html>
